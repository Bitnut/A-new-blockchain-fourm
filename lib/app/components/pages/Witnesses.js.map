{"version":3,"sources":["../../../../src/app/components/pages/Witnesses.jsx"],"names":["transactionActions","globalActions","Long","ByteBuffer","string","PropTypes","func","object","DISABLED_SIGNING_KEY","_blockGap","head_block","last_block","secs","mins","Math","floor","hrs","days","weeks","Witnesses","state","customUsername","proxy","proxyFailed","accountWitnessVote","accountName","approve","e","preventDefault","props","username","setState","onWitnessChange","target","value","forceUpdate","accountWitnessProxy","np","ns","witness_votes","witnessVotesInProgress","witnesses","current_proxy","sorted_witnesses","sort","a","b","fromString","String","get","subtract","toString","witness_vote_count","rank","map","owner","item","thread","myVote","has","signingKey","isDisabled","lastBlock","votingActive","classUp","up","witness_thread","links","remote","test","ownerStyle","textDecoration","color","bind","addl_witnesses","size","union","filter","toArray","length","count","float","width","maxWidth","paddingBottom","marginBottom","React","Component","propTypes","isRequired","module","exports","path","component","current_user","user","current_account","global","getIn","toSet","witness","dispatch","broadcastOperation","type","operation","account","stateCallback","confirm","successCallback","updateAccountWitnessProxy","errorCallback","console","log"],"mappings":"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","file":"Witnesses.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { Link } from 'react-router';\nimport links from 'app/utils/Links';\nimport Icon from 'app/components/elements/Icon';\nimport * as transactionActions from 'app/redux/TransactionReducer';\nimport ByteBuffer from 'bytebuffer';\nimport { is, Set, List } from 'immutable';\nimport * as globalActions from 'app/redux/GlobalReducer';\nimport tt from 'counterpart';\n\nconst Long = ByteBuffer.Long;\nconst { string, func, object } = PropTypes;\n\nconst DISABLED_SIGNING_KEY = 'STM1111111111111111111111111111111114T1Anm';\n\nfunction _blockGap(head_block, last_block) {\n    if (!last_block || last_block < 1) return 'forever';\n    const secs = (head_block - last_block) * 3;\n    if (secs < 120) return 'recently';\n    const mins = Math.floor(secs / 60);\n    if (mins < 120) return mins + ' mins ago';\n    const hrs = Math.floor(mins / 60);\n    if (hrs < 48) return hrs + ' hrs ago';\n    const days = Math.floor(hrs / 24);\n    if (days < 14) return days + ' days ago';\n    const weeks = Math.floor(days / 7);\n    if (weeks < 104) return weeks + ' weeks ago';\n}\n\nclass Witnesses extends React.Component {\n    static propTypes = {\n        // HTML properties\n\n        // Redux connect properties\n        witnesses: object.isRequired,\n        accountWitnessVote: func.isRequired,\n        username: string,\n        witness_votes: object,\n    };\n\n    constructor() {\n        super();\n        this.state = { customUsername: '', proxy: '', proxyFailed: false };\n        this.accountWitnessVote = (accountName, approve, e) => {\n            e.preventDefault();\n            const { username, accountWitnessVote } = this.props;\n            this.setState({ customUsername: '' });\n            accountWitnessVote(username, accountName, approve);\n        };\n        this.onWitnessChange = e => {\n            const customUsername = e.target.value;\n            this.setState({ customUsername });\n            // Force update to ensure witness vote appears\n            this.forceUpdate();\n        };\n        this.accountWitnessProxy = e => {\n            e.preventDefault();\n            const { username, accountWitnessProxy } = this.props;\n            accountWitnessProxy(username, this.state.proxy, state => {\n                this.setState(state);\n            });\n        };\n    }\n\n    shouldComponentUpdate(np, ns) {\n        return (\n            !is(np.witness_votes, this.props.witness_votes) ||\n            !is(np.witnessVotesInProgress, this.props.witnessVotesInProgress) ||\n            np.witnesses !== this.props.witnesses ||\n            np.current_proxy !== this.props.current_proxy ||\n            np.username !== this.props.username ||\n            ns.customUsername !== this.state.customUsername ||\n            ns.proxy !== this.state.proxy ||\n            ns.proxyFailed !== this.state.proxyFailed\n        );\n    }\n\n    render() {\n        const {\n            props: {\n                witness_votes,\n                witnessVotesInProgress,\n                current_proxy,\n                head_block,\n            },\n            state: { customUsername, proxy },\n            accountWitnessVote,\n            accountWitnessProxy,\n            onWitnessChange,\n        } = this;\n        const sorted_witnesses = this.props.witnesses.sort((a, b) =>\n            Long.fromString(String(b.get('votes'))).subtract(\n                Long.fromString(String(a.get('votes'))).toString()\n            )\n        );\n        let witness_vote_count = 30;\n        let rank = 1;\n\n        const witnesses = sorted_witnesses.map(item => {\n            const owner = item.get('owner');\n            const thread = item.get('url');\n            const myVote = witness_votes ? witness_votes.has(owner) : null;\n            const signingKey = item.get('signing_key');\n            const isDisabled = signingKey == DISABLED_SIGNING_KEY;\n            const lastBlock = item.get('last_confirmed_block_num');\n            const votingActive = witnessVotesInProgress.has(owner);\n            const classUp =\n                'Voting__button Voting__button-up' +\n                (myVote === true ? ' Voting__button--upvoted' : '') +\n                (votingActive ? ' votingUp' : '');\n            const up = (\n                <Icon\n                    name={votingActive ? 'empty' : 'chevron-up-circle'}\n                    className=\"upvote\"\n                />\n            );\n\n            let witness_thread = '';\n            if (thread) {\n                if (links.remote.test(thread)) {\n                    witness_thread = (\n                        <a href={thread}>\n                            {tt('witnesses_jsx.external_site')}&nbsp;<Icon name=\"extlink\" />\n                        </a>\n                    );\n                } else {\n                    witness_thread = (\n                        <Link to={thread}>\n                            {tt('witnesses_jsx.witness_thread')}\n                        </Link>\n                    );\n                }\n            }\n\n            const ownerStyle = isDisabled\n                ? { textDecoration: 'line-through', color: '#AAA' }\n                : {};\n\n            return (\n                <tr key={owner}>\n                    <td width=\"75\">\n                        {rank < 10 && '0'}\n                        {rank++}\n                        &nbsp;&nbsp;\n                        <span className={classUp}>\n                            {votingActive ? (\n                                up\n                            ) : (\n                                <a\n                                    href=\"#\"\n                                    onClick={accountWitnessVote.bind(\n                                        this,\n                                        owner,\n                                        !myVote\n                                    )}\n                                    title={tt('g.vote')}\n                                >\n                                    {up}\n                                </a>\n                            )}\n                        </span>\n                    </td>\n                    <td>\n                        <Link to={'/@' + owner} style={ownerStyle}>\n                            {owner}\n                        </Link>\n                        {isDisabled && (\n                            <small>\n                                {' '}\n                                ({tt('witnesses_jsx.disabled')}{' '}\n                                {_blockGap(head_block, lastBlock)})\n                            </small>\n                        )}\n                    </td>\n                    <td>{witness_thread}</td>\n                </tr>\n            );\n        });\n\n        let addl_witnesses = false;\n        if (witness_votes) {\n            witness_vote_count -= witness_votes.size;\n            addl_witnesses = witness_votes\n                .union(witnessVotesInProgress)\n                .filter(item => {\n                    return !sorted_witnesses.has(item);\n                })\n                .map(item => {\n                    const votingActive = witnessVotesInProgress.has(item);\n                    const classUp =\n                        'Voting__button Voting__button-up' +\n                        (votingActive\n                            ? ' votingUp'\n                            : ' Voting__button--upvoted');\n                    const up = (\n                        <Icon\n                            name={votingActive ? 'empty' : 'chevron-up-circle'}\n                            className=\"upvote\"\n                        />\n                    );\n                    return (\n                        <div className=\"row\" key={item}>\n                            <div className=\"column small-12\">\n                                <span>\n                                    {/*className=\"Voting\"*/}\n                                    <span className={classUp}>\n                                        {votingActive ? (\n                                            up\n                                        ) : (\n                                            <a\n                                                href=\"#\"\n                                                onClick={accountWitnessVote.bind(\n                                                    this,\n                                                    item,\n                                                    false\n                                                )}\n                                                title={tt('g.vote')}\n                                            >\n                                                {up}\n                                            </a>\n                                        )}\n                                        &nbsp;\n                                    </span>\n                                </span>\n                                <Link to={'/@' + item}>{item}</Link>\n                            </div>\n                        </div>\n                    );\n                })\n                .toArray();\n        }\n\n        return (\n            <div className=\"Witnesses\">\n                <div className=\"row\">\n                    <div className=\"column\">\n                        <h2>{tt('witnesses_jsx.top_witnesses')}</h2>\n                        {current_proxy && current_proxy.length ? null : (\n                            <p>\n                                <strong>\n                                    {tt(\n                                        'witnesses_jsx.you_have_votes_remaining',\n                                        { count: witness_vote_count }\n                                    )}.\n                                </strong>{' '}\n                                {tt(\n                                    'witnesses_jsx.you_can_vote_for_maximum_of_witnesses'\n                                )}.\n                            </p>\n                        )}\n                    </div>\n                </div>\n                {current_proxy ? null : (\n                    <div className=\"row small-collapse\">\n                        <div className=\"column\">\n                            <table>\n                                <thead>\n                                    <tr>\n                                        <th />\n                                        <th>{tt('witnesses_jsx.witness')}</th>\n                                        <th>\n                                            {tt('witnesses_jsx.information')}\n                                        </th>\n                                    </tr>\n                                </thead>\n                                <tbody>{witnesses.toArray()}</tbody>\n                            </table>\n                        </div>\n                    </div>\n                )}\n\n                {current_proxy ? null : (\n                    <div className=\"row\">\n                        <div className=\"column\">\n                            <p>\n                                {tt(\n                                    'witnesses_jsx.if_you_want_to_vote_outside_of_top_enter_account_name'\n                                )}.\n                            </p>\n                            <form>\n                                <div className=\"input-group\">\n                                    <span className=\"input-group-label\">@</span>\n                                    <input\n                                        className=\"input-group-field\"\n                                        type=\"text\"\n                                        style={{\n                                            float: 'left',\n                                            width: '75%',\n                                            maxWidth: '20rem',\n                                        }}\n                                        value={customUsername}\n                                        onChange={onWitnessChange}\n                                    />\n                                    <div className=\"input-group-button\">\n                                        <button\n                                            className=\"button\"\n                                            onClick={accountWitnessVote.bind(\n                                                this,\n                                                customUsername,\n                                                !(witness_votes\n                                                    ? witness_votes.has(\n                                                          customUsername\n                                                      )\n                                                    : null)\n                                            )}\n                                        >\n                                            {tt('g.vote')}\n                                        </button>\n                                    </div>\n                                </div>\n                            </form>\n                            <br />\n                            {addl_witnesses}\n                            <br />\n                            <br />\n                        </div>\n                    </div>\n                )}\n\n                <div className=\"row\">\n                    <div className=\"column\">\n                        <p>\n                            {current_proxy\n                                ? tt('witnesses_jsx.witness_set')\n                                : tt('witnesses_jsx.set_witness_proxy')}\n                        </p>\n                        {current_proxy ? (\n                            <div>\n                                <div style={{ paddingBottom: 10 }}>\n                                    {tt('witnesses_jsx.witness_proxy_current')}:{' '}\n                                    <strong>{current_proxy}</strong>\n                                </div>\n\n                                <form>\n                                    <div className=\"input-group\">\n                                        <input\n                                            className=\"input-group-field bold\"\n                                            disabled\n                                            type=\"text\"\n                                            style={{\n                                                float: 'left',\n                                                width: '75%',\n                                                maxWidth: '20rem',\n                                            }}\n                                            value={current_proxy}\n                                        />\n                                        <div className=\"input-group-button\">\n                                            <button\n                                                style={{ marginBottom: 0 }}\n                                                className=\"button\"\n                                                onClick={accountWitnessProxy}\n                                            >\n                                                {tt(\n                                                    'witnesses_jsx.witness_proxy_clear'\n                                                )}\n                                            </button>\n                                        </div>\n                                    </div>\n                                </form>\n                            </div>\n                        ) : (\n                            <form>\n                                <div className=\"input-group\">\n                                    <span className=\"input-group-label\">@</span>\n                                    <input\n                                        className=\"input-group-field bold\"\n                                        type=\"text\"\n                                        style={{\n                                            float: 'left',\n                                            width: '75%',\n                                            maxWidth: '20rem',\n                                        }}\n                                        value={proxy}\n                                        onChange={e => {\n                                            this.setState({\n                                                proxy: e.target.value,\n                                            });\n                                        }}\n                                    />\n                                    <div className=\"input-group-button\">\n                                        <button\n                                            style={{ marginBottom: 0 }}\n                                            className=\"button\"\n                                            onClick={accountWitnessProxy}\n                                        >\n                                            {tt(\n                                                'witnesses_jsx.witness_proxy_set'\n                                            )}\n                                        </button>\n                                    </div>\n                                </div>\n                            </form>\n                        )}\n                        {this.state.proxyFailed && (\n                            <p className=\"error\">\n                                {tt('witnesses_jsx.proxy_update_error')}.\n                            </p>\n                        )}\n                        <br />\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nmodule.exports = {\n    path: '/~witnesses(/:witness)',\n    component: connect(\n        state => {\n            const current_user = state.user.get('current');\n            const username = current_user && current_user.get('username');\n            const current_account =\n                current_user && state.global.getIn(['accounts', username]);\n            const witness_votes =\n                current_account && current_account.get('witness_votes').toSet();\n            const current_proxy =\n                current_account && current_account.get('proxy');\n            const witnesses = state.global.get('witnesses', List());\n            const witnessVotesInProgress = state.global.get(\n                `transaction_witness_vote_active_${username}`,\n                Set()\n            );\n            return {\n                head_block: state.global.getIn(['props', 'head_block_number']),\n                witnesses,\n                username,\n                witness_votes,\n                witnessVotesInProgress,\n                current_proxy,\n            };\n        },\n        dispatch => {\n            return {\n                accountWitnessVote: (username, witness, approve) => {\n                    dispatch(\n                        transactionActions.broadcastOperation({\n                            type: 'account_witness_vote',\n                            operation: { account: username, witness, approve },\n                        })\n                    );\n                },\n                accountWitnessProxy: (account, proxy, stateCallback) => {\n                    dispatch(\n                        transactionActions.broadcastOperation({\n                            type: 'account_witness_proxy',\n                            operation: { account, proxy },\n                            confirm: proxy.length\n                                ? 'Set proxy to: ' + proxy\n                                : 'You are about to remove your proxy.',\n                            successCallback: () => {\n                                dispatch(\n                                    globalActions.updateAccountWitnessProxy({\n                                        account,\n                                        proxy,\n                                    })\n                                );\n                                stateCallback({\n                                    proxyFailed: false,\n                                    proxy: '',\n                                });\n                            },\n                            errorCallback: e => {\n                                console.log('error:', e);\n                                stateCallback({ proxyFailed: true });\n                            },\n                        })\n                    );\n                },\n            };\n        }\n    )(Witnesses),\n};\n"]}