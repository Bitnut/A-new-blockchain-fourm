{"version":3,"sources":["../../../../src/app/components/cards/CardView.jsx"],"names":["globalActions","CardView","onCloseImage","e","preventDefault","props","formId","clearMetaElement","onCloseDescription","metaLinkData","canEdit","link","image","description","alt","youTubeImage","links","youTube","test","React","Component","propTypes","PropTypes","string","bool","object","func","defaultProps","state","ownProps","global","getIn","element","dispatch"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;AACA;;;;AACA;;AACA;;;;AACA;;IAAYA,a;;AACZ;;;;AACA;;;;;;;;AAEA;IACMC,Q;;;AAeF,wBAAc;AAAA;;AAAA;;AAEV,cAAKC,YAAL,GAAoB,aAAK;AACrBC,cAAEC,cAAF;AADqB,8BAEgB,MAAKC,KAFrB;AAAA,gBAEbC,MAFa,eAEbA,MAFa;AAAA,gBAELC,gBAFK,eAELA,gBAFK;;AAGrBA,6BAAiBD,MAAjB,EAAyB,OAAzB;AACH,SAJD;AAKA,cAAKE,kBAAL,GAA0B,aAAK;AAC3BL,cAAEC,cAAF;AAD2B,+BAEU,MAAKC,KAFf;AAAA,gBAEnBC,MAFmB,gBAEnBA,MAFmB;AAAA,gBAEXC,gBAFW,gBAEXA,gBAFW;;AAG3BA,6BAAiBD,MAAjB,EAAyB,aAAzB;AACH,SAJD;AAPU;AAYb;;;;iCACQ;AAAA,yBAC6B,KAAKD,KADlC;AAAA,gBACGI,YADH,UACGA,YADH;AAAA,gBACiBC,OADjB,UACiBA,OADjB;;AAEL,gBAAI,CAACD,YAAL,EAAmB,OAAO,2CAAP;AAFd,gBAGGE,IAHH,GAGqCF,YAHrC,CAGGE,IAHH;AAAA,gBAGSC,KAHT,GAGqCH,YAHrC,CAGSG,KAHT;AAAA,gBAGgBC,WAHhB,GAGqCJ,YAHrC,CAGgBI,WAHhB;AAAA,gBAG6BC,GAH7B,GAGqCL,YAHrC,CAG6BK,GAH7B;AAIL;;AACA,gBAAI,CAACF,KAAD,IAAU,CAACC,WAAf,EAA4B,OAAO,2CAAP;AAC5B;AACA,gBAAME,eAAeC,gBAAMC,OAAN,CAAcC,IAAd,CAAmBP,IAAnB,CAArB;AACA,mBACI;AAAA;AAAA,kBAAM,WAAU,MAAhB;AACKC,yBACG,CAACG,YADJ,IAEO;AAAA;AAAA;AACKL,+BACG;AAAA;AAAA;AAAA;AACK;AAAA;AAAA,8BAAG,SAAS,KAAKR,YAAjB;AACI,uDAAG,UAAH;AADJ,yBADL;AAAA;AAGS;AAHT,qBAFR;AAQI;AAAC,sCAAD;AAAA,0BAAM,MAAMS,IAAZ;AACI,+DAAK,KAAKC,KAAV,EAAiB,KAAKE,GAAtB;AADJ;AARJ,iBAHZ;AAgBKD,+BACG;AAAA;AAAA;AACKH,+BACG;AAAA;AAAA;AAAA;AACK;AAAA;AAAA,8BAAG,SAAS,KAAKF,kBAAjB;AACI,uDAAG,UAAH;AADJ,yBADL;AAAA;AAAA,qBAFR;AAQI;AAAC,sCAAD;AAAA,0BAAM,MAAMG,IAAZ;AACI;AAAA;AAAA;AAAaE;AAAb;AADJ;AARJ;AAjBR,aADJ;AAiCH;;;EArEkBM,gBAAMC,S,UAClBC,S,GAAY;AACf;AACAf,YAAQgB,oBAAUC,MAFH;AAGfb,aAASY,oBAAUE,IAHJ;;AAKf;AACAf,kBAAca,oBAAUG,MANT;;AAQf;AACAlB,sBAAkBe,oBAAUI;AATb,C,SAWZC,Y,GAAe;AAClBjB,aAAS;AADS,C;kBA2DX,yBACX,UAACkB,KAAD,EAAQC,QAAR,EAAqB;AACjB;AACA,QAAMvB,SAASuB,SAASvB,MAAxB;AACA,QAAMG,eAAemB,MAAME,MAAN,CAAaC,KAAb,CAAmB,CAAC,cAAD,EAAiBzB,MAAjB,CAAnB,CAArB;AACA,oCAASG,0BAAT,IAA0BoB,QAA1B;AACH,CANU,EAOX;AAAA,WAAa;AACTtB,0BAAkB,0BAACD,MAAD,EAAS0B,OAAT,EAAqB;AACnCC,qBAASjC,cAAcO,gBAAd,CAA+B,EAAED,cAAF,EAAU0B,gBAAV,EAA/B,CAAT;AACH;AAHQ,KAAb;AAAA,CAPW,EAYb/B,QAZa,C","file":"CardView.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport Link from 'app/components/elements/Link';\nimport * as globalActions from 'app/redux/GlobalReducer';\nimport links from 'app/utils/Links';\nimport tt from 'counterpart';\n\n/** @deprecated */\nclass CardView extends React.Component {\n    static propTypes = {\n        // HTML properties\n        formId: PropTypes.string,\n        canEdit: PropTypes.bool,\n\n        // redux or html\n        metaLinkData: PropTypes.object,\n\n        // redux\n        clearMetaElement: PropTypes.func,\n    };\n    static defaultProps = {\n        canEdit: false,\n    };\n    constructor() {\n        super();\n        this.onCloseImage = e => {\n            e.preventDefault();\n            const { formId, clearMetaElement } = this.props;\n            clearMetaElement(formId, 'image');\n        };\n        this.onCloseDescription = e => {\n            e.preventDefault();\n            const { formId, clearMetaElement } = this.props;\n            clearMetaElement(formId, 'description');\n        };\n    }\n    render() {\n        const { metaLinkData, canEdit } = this.props;\n        if (!metaLinkData) return <span />;\n        const { link, image, description, alt } = metaLinkData;\n        // http://postimg.org/image/kbefrpbe9/\n        if (!image && !description) return <span />;\n        // youTubeImages have their own preview\n        const youTubeImage = links.youTube.test(link);\n        return (\n            <span className=\"Card\">\n                {image &&\n                    !youTubeImage && (\n                        <div>\n                            {canEdit && (\n                                <div>\n                                    (<a onClick={this.onCloseImage}>\n                                        {tt('g.remove')}\n                                    </a>)<br />\n                                </div>\n                            )}\n                            <Link href={link}>\n                                <img src={image} alt={alt} />\n                            </Link>\n                        </div>\n                    )}\n                {description && (\n                    <div>\n                        {canEdit && (\n                            <span>\n                                (<a onClick={this.onCloseDescription}>\n                                    {tt('g.remove')}\n                                </a>)\n                            </span>\n                        )}\n                        <Link href={link}>\n                            <blockquote>{description}</blockquote>\n                        </Link>\n                    </div>\n                )}\n            </span>\n        );\n    }\n}\nexport default connect(\n    (state, ownProps) => {\n        // const {text} = ownProps\n        const formId = ownProps.formId;\n        const metaLinkData = state.global.getIn(['metaLinkData', formId]);\n        return { metaLinkData, ...ownProps };\n    },\n    dispatch => ({\n        clearMetaElement: (formId, element) => {\n            dispatch(globalActions.clearMetaElement({ formId, element }));\n        },\n    })\n)(CardView);\n"]}