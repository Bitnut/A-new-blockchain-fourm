{"version":3,"sources":["../../../../src/app/components/elements/OrderHistory.jsx"],"names":["OrderHistory","state","historyIndex","animate","setTimeout","setState","history","buy","length","map","order","index","date","getTime","getStringPrice","getStringSBD","filter","a","back","newState","newIndex","Math","min","max","props","LIQUID_TOKEN","DEBT_TOKEN_SHORT","CURRENCY_SIGN","renderHistoryRows","_setHistoryPage","bind","React","Component"],"mappings":"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","file":"OrderHistory.js","sourcesContent":["import React from 'react';\nimport HistoryRow from './OrderhistoryRow';\nimport tt from 'counterpart';\nimport {\n    DEBT_TOKEN_SHORT,\n    LIQUID_TOKEN,\n    CURRENCY_SIGN,\n} from 'app/client_config';\n\nexport default class OrderHistory extends React.Component {\n    constructor() {\n        super();\n\n        this.state = {\n            historyIndex: 0,\n            animate: false,\n        };\n    }\n\n    componentDidMount() {\n        setTimeout(() => {\n            this.setState({\n                animate: true,\n            });\n        }, 2000);\n    }\n\n    renderHistoryRows(history, buy) {\n        if (!history.length) {\n            return null;\n        }\n\n        let { historyIndex } = this.state;\n\n        return history\n            .map((order, index) => {\n                if (index >= historyIndex && index < historyIndex + 10) {\n                    return (\n                        <HistoryRow\n                            key={\n                                order.date.getTime() +\n                                order.getStringPrice() +\n                                order.getStringSBD()\n                            }\n                            index={index}\n                            order={order}\n                            animate={this.state.animate}\n                        />\n                    );\n                }\n            })\n            .filter(a => {\n                return !!a;\n            });\n    }\n\n    _setHistoryPage(back) {\n        let newState = {};\n        const newIndex = this.state.historyIndex + (back ? 10 : -10);\n        newState.historyIndex = Math.min(\n            Math.max(0, newIndex),\n            this.props.history.length - 10\n        );\n\n        // Disable animations while paging\n        if (newIndex !== this.state.historyIndex) {\n            newState.animate = false;\n        }\n        // Reenable animatons after paging complete\n        this.setState(newState, () => {\n            this.setState({ animate: true });\n        });\n    }\n\n    render() {\n        const { history } = this.props;\n        const { historyIndex } = this.state;\n\n        return (\n            <section>\n                <table className=\"Market__trade-history\">\n                    <thead>\n                        <tr>\n                            <th>{tt('g.date')}</th>\n                            <th>{tt('g.price')}</th>\n                            <th>{LIQUID_TOKEN}</th>\n                            <th>{`${DEBT_TOKEN_SHORT} (${CURRENCY_SIGN})`}</th>\n                        </tr>\n                    </thead>\n                    <tbody>{this.renderHistoryRows(history)}</tbody>\n                </table>\n\n                <nav>\n                    <ul className=\"pager\">\n                        <li>\n                            <div\n                                className={\n                                    'button tiny hollow float-left ' +\n                                    (historyIndex === 0 ? ' disabled' : '')\n                                }\n                                onClick={this._setHistoryPage.bind(this, false)}\n                                aria-label=\"Previous\"\n                            >\n                                <span aria-hidden=\"true\">\n                                    &larr; {tt('g.newer')}\n                                </span>\n                            </div>\n                        </li>\n                        <li>\n                            <div\n                                className={\n                                    'button tiny hollow float-right ' +\n                                    (historyIndex >= history.length - 10\n                                        ? ' disabled'\n                                        : '')\n                                }\n                                onClick={this._setHistoryPage.bind(this, true)}\n                                aria-label=\"Next\"\n                            >\n                                <span aria-hidden=\"true\">\n                                    {tt('g.older')} &rarr;\n                                </span>\n                            </div>\n                        </li>\n                    </ul>\n                </nav>\n            </section>\n        );\n    }\n}\n"]}