{"version":3,"sources":["../../../../src/app/components/elements/PageViewsCounter.jsx"],"names":["PageViewsCounter","props","last_page","ref","document","referrer","window","location","pathname","pageView","nextProps","nextState","React","Component","propTypes","hidden","PropTypes","bool","defaultProps"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;AACA;;;;AACA;;AACA;;;;AACA;;;;;;IAEqBA,gB;;;AASjB,8BAAYC,KAAZ,EAAmB;AAAA;;AAAA,8JACTA,KADS;;AAEf,cAAKC,SAAL,GAAiB,IAAjB;AAFe;AAGlB;;;;mCAEU;AACP,gBAAIC,MAAMC,SAASC,QAAT,IAAqB,EAA/B;AACA,iDAAeC,OAAOC,QAAP,CAAgBC,QAA/B,EAAyCL,GAAzC;AACA,iBAAKD,SAAL,GAAiBI,OAAOC,QAAP,CAAgBC,QAAjC;AACH;;;4CAEmB;AAChB,iBAAKC,QAAL;AACH;;;8CAEqBC,S,EAAWC,S,EAAW;AACxC,mBAAOL,OAAOC,QAAP,CAAgBC,QAAhB,KAA6B,KAAKN,SAAzC;AACH;;;6CAEoB;AACjB,iBAAKO,QAAL;AACH;;;iCAEQ;AACL;AACA,mBAAO,IAAP;AACH;;;EAnCyCG,gBAAMC,S,UACzCC,S,GAAY;AACfC,YAAQC,oBAAUC;AADH,C,SAIZC,Y,GAAe;AAClBH,YAAQ;AADU,C;kBALLf,gB","file":"PageViewsCounter.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { recordPageView } from 'app/utils/ServerApiClient';\nimport Icon from 'app/components/elements/Icon';\nimport tt from 'counterpart';\n\nexport default class PageViewsCounter extends React.Component {\n    static propTypes = {\n        hidden: PropTypes.bool,\n    };\n\n    static defaultProps = {\n        hidden: true,\n    };\n\n    constructor(props) {\n        super(props);\n        this.last_page = null;\n    }\n\n    pageView() {\n        let ref = document.referrer || '';\n        recordPageView(window.location.pathname, ref);\n        this.last_page = window.location.pathname;\n    }\n\n    componentDidMount() {\n        this.pageView();\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        return window.location.pathname !== this.last_page;\n    }\n\n    componentDidUpdate() {\n        this.pageView();\n    }\n\n    render() {\n        // Due to a MySQL mystery, no more page view reads; only writes.\n        return null;\n    }\n}\n"]}