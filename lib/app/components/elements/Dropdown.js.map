{"version":3,"sources":["../../../../src/app/components/elements/Dropdown.jsx"],"names":["Dropdown","props","toggle","shown","state","hide","e","show","preventDefault","setState","onShow","document","addEventListener","inside_dropdown","target","onHide","removeEventListener","nextProps","children","className","title","href","position","entry","content","cls","React","createElement","key","Component","propTypes","PropTypes","object","string","oneOfType","isRequired","func","bool","defaultProps"],"mappings":"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","file":"Dropdown.js","sourcesContent":["import React from 'react';\nimport { browserHistory } from 'react-router';\nimport Icon from 'app/components/elements/Icon';\nimport { findParent } from 'app/utils/DomUtils';\n\nexport default class Dropdown extends React.Component {\n    static propTypes = {\n        children: React.PropTypes.object,\n        className: React.PropTypes.string,\n        title: React.PropTypes.oneOfType([\n            React.PropTypes.string,\n            React.PropTypes.object,\n        ]).isRequired,\n        href: React.PropTypes.string,\n        onHide: React.PropTypes.func,\n        onShow: React.PropTypes.func,\n        show: React.PropTypes.bool,\n    };\n\n    static defaultProps = {\n        onHide: () => null,\n        onShow: () => null,\n        show: false,\n        className: 'dropdown-comp',\n        href: null,\n    };\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            shown: false,\n        };\n    }\n\n    componentWillReceiveProps(nextProps) {\n        if (nextProps.show !== this.state.shown) {\n            this.setState({ shown: nextProps.show });\n        }\n    }\n\n    componentWillUnmount() {\n        document.removeEventListener('click', this.hide);\n    }\n\n    toggle = e => {\n        const { shown } = this.state;\n        if (shown) {\n            this.hide(e);\n        } else this.show(e);\n    };\n\n    show = e => {\n        e.preventDefault();\n        this.setState({ shown: true });\n        this.props.onShow();\n        document.addEventListener('click', this.hide);\n    };\n\n    hide = e => {\n        // Do not hide the dropdown if there was a click within it.\n        const inside_dropdown = !!findParent(e.target, 'dropdown__content');\n        if (inside_dropdown) return;\n        e.preventDefault();\n        this.setState({ shown: false });\n        this.props.onHide();\n        document.removeEventListener('click', this.hide);\n    };\n\n    render() {\n        const { children, className, title, href, position } = this.props;\n\n        let entry = (\n            <a key=\"entry\" href={href || '#'} onClick={this.toggle}>\n                {title}\n            </a>\n        );\n\n        const content = (\n            <div key=\"dropdown-content\" className={'dropdown__content'}>\n                {children}\n            </div>\n        );\n        const cls =\n            'dropdown' +\n            (this.state.shown ? ' show' : '') +\n            (className ? ` ${className}` : '') +\n            (position ? ` ${position}` : '');\n        return React.createElement('div', { className: cls, key: 'dropdown' }, [\n            entry,\n            content,\n        ]);\n    }\n}\n"]}