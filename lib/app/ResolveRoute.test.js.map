{"version":3,"sources":["../../src/app/ResolveRoute.test.js"],"names":["jest","mock","describe","it","test_cases","forEach","expect","routeRegex","r","toEqual","page","params","process","env","NODE_ENV","OFFLINE_SSR_TEST"],"mappings":"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","file":"ResolveRoute.test.js","sourcesContent":["jest.mock('./utils/GDPRUserList');\nimport resolveRoute, { routeRegex } from './ResolveRoute';\n\ndescribe('routeRegex', () => {\n    it('should produce the desired regex patterns', () => {\n        const test_cases = [\n            ['PostsIndex', /^\\/(@[\\w\\.\\d-]+)\\/feed\\/?$/],\n            ['UserProfile1', /^\\/(@[\\w\\.\\d-]+)\\/?$/],\n            [\n                'UserProfile2',\n                /^\\/(@[\\w\\.\\d-]+)\\/(blog|posts|comments|recommended|transfers|curation-rewards|author-rewards|permissions|created|recent-replies|feed|password|followed|followers|settings)\\/?$/,\n            ],\n            ['UserProfile3', /^\\/(@[\\w\\.\\d-]+)\\/[\\w\\.\\d-]+/],\n            [\n                'CategoryFilters',\n                /^\\/(hot|votes|responses|trending|trending30|promoted|cashout|payout|payout_comments|created|active)\\/?$/gi,\n            ],\n            ['PostNoCategory', /^\\/(@[\\w\\.\\d-]+)\\/([\\w\\d-]+)/],\n            ['Post', /^\\/([\\w\\d\\-\\/]+)\\/(\\@[\\w\\d\\.-]+)\\/([\\w\\d-]+)\\/?($|\\?)/],\n            [\n                'PostJson',\n                /^\\/([\\w\\d\\-\\/]+)\\/(\\@[\\w\\d\\.-]+)\\/([\\w\\d-]+)(\\.json)$/,\n            ],\n            ['UserJson', /^\\/(@[\\w\\.\\d-]+)(\\.json)$/],\n            ['UserNameJson', /^.*(?=(\\.json))/],\n        ];\n\n        test_cases.forEach(r => {\n            expect(routeRegex[r[0]]).toEqual(r[1]);\n        });\n    });\n});\n\ndescribe('resolveRoute', () => {\n    const test_cases = [\n        ['/', { page: 'PostsIndex', params: ['trending'] }],\n        ['/about.html', { page: 'About' }],\n        ['/faq.html', { page: 'Faq' }],\n        ['/login.html', { page: 'Login' }],\n        ['/privacy.html', { page: 'Privacy' }],\n        ['/support.html', { page: 'Support' }],\n        ['/tos.html', { page: 'Tos' }],\n        ['/change_password', { page: 'ChangePassword' }],\n        ['/create_account', { page: 'CreateAccount' }],\n        ['/approval', { page: 'Approval' }],\n        ['/pick_account', { page: 'NotFound' }],\n        ['/recover_account_step_1', { page: 'RecoverAccountStep1' }],\n        ['/recover_account_step_2', { page: 'RecoverAccountStep2' }],\n        ['/waiting_list.html', { page: 'WaitingList' }],\n        ['/market', { page: 'Market' }],\n        ['/~witnesses', { page: 'Witnesses' }],\n        ['/submit.html', { page: 'SubmitPost' }],\n        [\n            '/@maitland/feed',\n            { page: 'PostsIndex', params: ['home', '@maitland'] },\n        ],\n        ['/@gdpr/feed', { page: 'NotFound' }],\n        [\n            '/@maitland/blog',\n            { page: 'UserProfile', params: ['@maitland', 'blog'] },\n        ],\n        ['/@gdpr/blog', { page: 'NotFound' }],\n        [\n            '/@cool/nice345',\n            { page: 'PostNoCategory', params: ['@cool', 'nice345'] },\n        ],\n        ['/@gdpr/nice345', { page: 'NotFound' }],\n        [\n            '/ceasar/@salad/circa90',\n            { page: 'Post', params: ['ceasar', '@salad', 'circa90', ''] },\n        ],\n        ['/taggy/@gdpr/nice345', { page: 'NotFound' }],\n    ];\n    test_cases.forEach(r => {\n        it(`should resolve the route for the ${r[1].page} page`, () => {\n            expect(resolveRoute(r[0])).toEqual(r[1]);\n        });\n    });\n\n    it('should resolve xss test route in development environment', () => {\n        expect(resolveRoute('/xss/test')).toEqual({ page: 'NotFound' });\n        process.env.NODE_ENV = 'development';\n        expect(resolveRoute('/xss/test')).toEqual({ page: 'XSSTest' });\n        delete process.env.NODE_ENV;\n    });\n    it('should resolve benchmark route in development environment', () => {\n        expect(resolveRoute('/benchmark')).toEqual({ page: 'NotFound' });\n        process.env.OFFLINE_SSR_TEST = true;\n        expect(resolveRoute('/benchmark')).toEqual({ page: 'Benchmark' });\n        delete process.env.OFFLINE_SSR_TEST;\n    });\n    it('should resolve an unknown route to NotFound', () => {\n        expect(resolveRoute('/randomness')).toEqual({ page: 'NotFound' });\n    });\n});\n"]}