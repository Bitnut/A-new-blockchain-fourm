{"version":3,"sources":["../../../src/db/migrations/20160420133848-create-identity.js"],"names":["module","exports","up","queryInterface","Sequelize","createTable","id","allowNull","autoIncrement","primaryKey","type","INTEGER","user_id","references","model","key","onUpdate","onDelete","provider","STRING","provider_user_id","name","email","phone","confirmation_code","verified","BOOLEAN","score","created_at","DATE","updated_at","then","addIndex","down","dropTable"],"mappings":";;AAAAA,OAAOC,OAAP,GAAiB;AACbC,QAAI,YAASC,cAAT,EAAyBC,SAAzB,EAAoC;AACpC,eAAOD,eACFE,WADE,CACU,YADV,EACwB;AACvBC,gBAAI;AACAC,2BAAW,KADX;AAEAC,+BAAe,IAFf;AAGAC,4BAAY,IAHZ;AAIAC,sBAAMN,UAAUO;AAJhB,aADmB;AAOvBC,qBAAS;AACLF,sBAAMN,UAAUO,OADX;AAELE,4BAAY;AACRC,2BAAO,OADC;AAERC,yBAAK;AAFG,iBAFP;AAMLC,0BAAU,SANL;AAOLC,0BAAU;AAPL,aAPc;AAgBvBC,sBAAU;AACNR,sBAAMN,UAAUe;AADV,aAhBa;AAmBvBC,8BAAkB;AACdV,sBAAMN,UAAUe;AADF,aAnBK;AAsBvBE,kBAAM;AACFX,sBAAMN,UAAUe;AADd,aAtBiB;AAyBvBG,mBAAO;AACHZ,sBAAMN,UAAUe;AADb,aAzBgB;AA4BvBI,mBAAO;AACHb,sBAAMN,UAAUe,MAAV,CAAiB,EAAjB;AADH,aA5BgB;AA+BvBK,+BAAmB;AACfd,sBAAMN,UAAUe;AADD,aA/BI;AAkCvBM,sBAAU;AACNf,sBAAMN,UAAUsB;AADV,aAlCa;AAqCvBC,mBAAO;AACHjB,sBAAMN,UAAUO;AADb,aArCgB;AAwCvBiB,wBAAY;AACRrB,2BAAW,KADH;AAERG,sBAAMN,UAAUyB;AAFR,aAxCW;AA4CvBC,wBAAY;AACRvB,2BAAW,KADH;AAERG,sBAAMN,UAAUyB;AAFR;AA5CW,SADxB,EAkDFE,IAlDE,CAkDG,YAAW;AACb5B,2BAAe6B,QAAf,CAAwB,YAAxB,EAAsC,CAAC,OAAD,CAAtC;AACA7B,2BAAe6B,QAAf,CAAwB,YAAxB,EAAsC,CAAC,OAAD,CAAtC;AACA7B,2BAAe6B,QAAf,CAAwB,YAAxB,EAAsC,CAAC,mBAAD,CAAtC;AACH,SAtDE,CAAP;AAuDH,KAzDY;AA0DbC,UAAM,cAAS9B,cAAT,EAAyBC,SAAzB,EAAoC;AACtC,eAAOD,eAAe+B,SAAf,CAAyB,YAAzB,CAAP;AACH;AA5DY,CAAjB","file":"20160420133848-create-identity.js","sourcesContent":["module.exports = {\n    up: function(queryInterface, Sequelize) {\n        return queryInterface\n            .createTable('identities', {\n                id: {\n                    allowNull: false,\n                    autoIncrement: true,\n                    primaryKey: true,\n                    type: Sequelize.INTEGER,\n                },\n                user_id: {\n                    type: Sequelize.INTEGER,\n                    references: {\n                        model: 'users',\n                        key: 'id',\n                    },\n                    onUpdate: 'cascade',\n                    onDelete: 'cascade',\n                },\n                provider: {\n                    type: Sequelize.STRING,\n                },\n                provider_user_id: {\n                    type: Sequelize.STRING,\n                },\n                name: {\n                    type: Sequelize.STRING,\n                },\n                email: {\n                    type: Sequelize.STRING,\n                },\n                phone: {\n                    type: Sequelize.STRING(32),\n                },\n                confirmation_code: {\n                    type: Sequelize.STRING,\n                },\n                verified: {\n                    type: Sequelize.BOOLEAN,\n                },\n                score: {\n                    type: Sequelize.INTEGER,\n                },\n                created_at: {\n                    allowNull: false,\n                    type: Sequelize.DATE,\n                },\n                updated_at: {\n                    allowNull: false,\n                    type: Sequelize.DATE,\n                },\n            })\n            .then(function() {\n                queryInterface.addIndex('identities', ['email']);\n                queryInterface.addIndex('identities', ['phone']);\n                queryInterface.addIndex('identities', ['confirmation_code']);\n            });\n    },\n    down: function(queryInterface, Sequelize) {\n        return queryInterface.dropTable('identities');\n    },\n};\n"]}